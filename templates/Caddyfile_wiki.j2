
dev.wiki.freifunk.net {
    basic_auth {
        #  password "ComputerSaysYes"
        freifunk $2a$12$LylvJI3RTwO6cgKt1Z2ut.tEBTQY.LiePnXSaqBEMNI0Wl3QDmwdu
    }

    encode gzip zstd
#    @title {
#        not file {
#            try_files {path} {path}/
#            split_path .php
#        }
#        path_regexp title ^/(.*)$
#    }
#    rewrite @title /index.php?title={re.title.1}&{query}

    @blocked path /mw-config/*  /tests/*  /maintenance/*  /status/*  /LocalSettings.php  /vendor/*  /languages/*  /cache/*  /includes/*  /extensions/MobileFrontend/dev-scripts/*  /extensions/MobileFrontend/tests/*

    respond @blocked 403

    root /images/* /opt/dev.wiki.freifunk.net/static/
    root /robots.txt /opt/dev.wiki.freifunk.net/static/
    root /favicon.ico /opt/dev.wiki.freifunk.net/static/
    root /wiki.svg /opt/dev.wiki.freifunk.net/static/

    root * /opt/dev.wiki.freifunk.net/wwwroot/

    php_fastcgi unix//var/run/php/php8.2-fpm.sock

    log {
        output file /var/log/caddy/dev.wiki.freifunk.net-error.log
        level ERROR
    }

    file_server
}
