LOOMIO_CONTAINER_IMAGE=loomio/loomio
LOOMIO_CONTAINER_TAG=stable
MAILIN_CONTAINER_IMAGE=loomio/mailin-docker
MAILIN_CONTAINER_TAG=latest
POSTGRES_CONTAINER_TAG=17

# this is the hostname of your app eg: loomio.org
CANONICAL_HOST=vote.freifunktion.net

# email address of admin of the server for LetsEncrypt
SUPPORT_EMAIL=freifunktion@systemli.org

# the human name of the app (Default Loomio)
SITE_NAME=vote.freifunktion.net

# reply-to in email notifications
REPLY_HOSTNAME=vote.freifunktion.net

# hostname of the node.js app that handles websocket stuff
CHANNELS_URL=wss://channels.vote.freifunktion.net
HOCUSPOCUS_URL=wss://hocuspocus.vote.freifunktion.net

# smtp settings
SMTP_AUTH=plain

SMTP_DOMAIN=systemli.org
SMTP_SERVER=mail.systemli.org
NOTIFICATIONS_EMAIL_ADDRESS=freifunktion@systemli.org

SMTP_PORT=465

SMTP_USERNAME=freifunktion@systemli.org
SMTP_PASSWORD={{ vote_smtp_password }}

SMTP_USE_SSL=1
# to disable SSL comment out line (rather than changing to 0)

RAILS_ENV=production

# Number of webserver processes and threads
# See https://github.com/puma/puma
PUMA_WORKERS=1
MIN_THREADS=3
MAX_THREADS=3

# Force all connections to be https
FORCE_SSL=1

# Enable rate limiting on group creation, other POST actions
USE_RACK_ATTACK=1
RACK_ATTACK_RATE_MULTPLIER=1
RACK_ATTACK_TIME_MULTPLIER=1

# Postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=loomio_production
DATABASE_URL=postgresql://postgres:password@db/loomio_production

# Redis URL
REDIS_URL=redis://redis:6379/0

# attachment storage service
# local will keep attachments on the server's disk under ./storage
ACTIVE_STORAGE_SERVICE=local 

# disable features
FEATURES_DISABLE_CREATE_USER=1     # users must be invited
FEATURES_DISABLE_CREATE_GROUP=1    # users cannot create groups
FEATURES_DISABLE_PUBLIC_GROUPS=1   # disable /explore

# tell clients to reload when the server is upgraded
LOOMIO_SYSTEM_RELOAD=1
DEVISE_SECRET={{ vote_devise_secret }}
SECRET_COOKIE_TOKEN={{ vote_secret_cookie_token }}
