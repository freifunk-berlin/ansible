// This is the primary configuration file for the BIND DNS server named.
//
// Please read /usr/share/doc/bind9/README.Debian for information on the
// structure of BIND configuration files in Debian, *BEFORE* you customize
// this configuration file.
//
// If you are just adding zones, please do that in /etc/bind/named.conf.local

options {
        directory "/var/cache/bind";
        dnssec-validation auto;
        recursion no;
        allow-transfer { none; };

        auth-nxdomain no;    // conform to RFC1035
        listen-on-v6 { any; };
        listen-on { any; };

        // Rate Limiting: https://kb.isc.org/docs/bind-best-practices-authoritative

        rate-limit {
        slip 2; // Every other response truncated
        window 15; // Seconds to bucket
        responses-per-second 5;// # of good responses per prefix-length/sec
        referrals-per-second 5; // referral responses
        nodata-per-second 5; // nodata responses
        nxdomains-per-second 5; // nxdomain responses
        errors-per-second 5; // error responses
        all-per-second 20; // When we drop all
        log-only yes; // Debugging mode
        qps-scale 250; // x / 1000 * per-second
        // = new drop limit
        exempt-clients { 127.0.0.1; };
        ipv4-prefix-length 24; // Define the IPv4 block size
        ipv6-prefix-length 56; // Define the IPv6 block size
        max-table-size 20000; // 40 bytes * this number = max memory
        min-table-size 500; // pre-allocate to speed startup
        };
};



// prime the server with knowledge of the root servers

zone "." { type hint; file "/usr/share/dns/root.hints"; };


// Consider adding the 1918 zones here, if they are not used in your
// organization

zone "10.in-addr.arpa"      { type master; file "/etc/bind/db.empty"; };
zone "16.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "17.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "18.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "19.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "20.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "21.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "22.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "23.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "24.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "25.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "26.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "27.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "28.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "29.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "30.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "31.172.in-addr.arpa"  { type master; file "/etc/bind/db.empty"; };
zone "168.192.in-addr.arpa" { type master; file "/etc/bind/db.empty"; };


zone "localhost" { type master; file "/etc/bind/db.local"; };
zone "127.in-addr.arpa" { type master; file "/etc/bind/db.127"; };
zone "0.in-addr.arpa" { type master; file "/etc/bind/db.0"; };
zone "255.in-addr.arpa" { type master; file "/etc/bind/db.255"; };


zone "xn--t-lffel-c1a.de"      { type master; file "/etc/bind/zones/db.xn--t-lffel-c1a.de"; };
zone "freifunktion.net"      { type master; file "/etc/bind/zones/db.freifunktion.net"; };
