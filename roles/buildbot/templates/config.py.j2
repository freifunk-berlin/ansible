# -*- python -*-
# ex: set filetype=python:

# {{ ansible_managed }}


# Buildbot internal database
dbURL = 'mysql://buildbot:{{ buildbot_mariadb_user_password }}@localhost/buildbot?max_idle=300'


# Various Buildbot settings
wwwPort = 8010
pbPort = 9989
title = 'Freifunk Berlin'
titleURL = 'https://buildbot.berlin.freifunk.net/'
buildbotURL = 'https://buildbot.berlin.freifunk.net/'


# OAuth Login via Github
githubOrg = 'freifunk-berlin'
githubClientID = '{{ githubClientID }}'
githubClientSecret = '{{ githubClientSecret }}'


# Automatic builds
webhookSecret = '{{ webhook_secret }}'


# Result notifications
matrixHomeserver = '{{ matrixHomeserver }}'
matrixAccessToken = '{{ matrixAccessToken }}'
matrixRoom = '{{ matrixRoom }}'


# Repository-URL for the builter script.
builter_repo = 'https://github.com/freifunk-berlin/falter-builter.git'
builter_branches = ['master']
builter_releaseBranches = ['snapshot', '1.3.0-snapshot', '1.2.3-snapshot']


# URL for the packages repo. The branches map to the branches selectable
# in the force scheduler
packages_repo = 'https://github.com/freifunk-berlin/falter-packages.git'
packages_branches = ['master','openwrt-22.03','openwrt-21.02']


# workernames get used in the build-factories, all workers get assigned to
# the falter-builders except for the master worker
workerNames = [
    {% for worker in buildbot_workers %}
    "{{ worker.name }}",
    {% endfor %}
]


# Version of the Alpine Linux container: edge, 3.17, 3.16, ...
alpineVersion = '3.17'


# this variable holds all workers available. masterworker is somewhat special,
# so we let appear it here only.
workers = [
    ('{{ buildbot_master_worker.name }}', '{{ buildbot_master_worker.passwd }}'),
    {% for worker in buildbot_workers %}
    ('{{ worker.name }}', '{{ worker.passwd }}'),
    {% endfor %}
]
